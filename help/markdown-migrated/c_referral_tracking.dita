<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd"[]>
<concept id="c_referral_tracking">
  <title>Referral Tracking</title>
  <shortdesc>Track clicks back to your page from referral traffic.</shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Experience Manager" />
    </metadata>
  </prolog>
  <conbody>
    <p>On this page:</p>
    <ul id="ul_bx4_qrl_wz">
      <li>
        <xref href="#c_referral_tracking/section_nsy_qp4_xz" format="dita" />
      </li>
      <li>
        <xref href="#c_referral_tracking/section_xvs_x44_xz" format="dita" />
      </li>
    </ul>
    <p>Livefyre appends a referral variable to the URL when a comment is posted or shared to a social
   network, and for permalinks included in Livefyre emails. Use this variable to track referral
   traffic from Livefyre Apps to your social or owned properties.</p>
    <p>Livefyre Apps allow you to track data streams resulting from referral traffic, allowing you to
   analyze your site’s traffic.</p>
    <section id="section_nsy_qp4_xz">
      <title>Tracking Livefyre Referral Traffic</title>
      <p>Livefyre referral traffic from social networks and emails may be tracked by inspecting the
    query string parameters in the URLs of your pages and implementing code on your page to track
    this through your analytics provider. Livefyre appends a referral link to the URL when a comment
    is posted or shared to a social network, and for permalinks included in Livefyre emails.</p>
    </section>
    <section id="section_xvs_x44_xz">
      <title>
        <b>Implementation Example</b>
      </title>
      <p>If the traffic was from a StreamHub-powered notification, there will be a hubRefSrc query
    string parameter with a value of email, facebook, twitter, linkedin, or permalink. The hubRefSrc
    parameter name can be configured at the network level by your Livefyre delivery team.</p>
      <p>To integrate with an analytics platform, your page must look for the hubRefSrc on load, and
    record the traffic if it is present.</p>
      <p>For example:</p>
      <codeblock>(function () {
   var qs = document.location.search.substring(1),
      param = 'hubRefSrc',
      valueRegex = new RegExp(param+'=([^&amp;]+)'),
      match = qs.match(valueRegex),
      referrer;
   if (match) {
      // StreamHub generated traffic!
      referrer = match[1];
      console.log('StreamHub referred via', referrer);
   } else {
      // StreamHub did not refer this traffic
   }
}())</codeblock>
    </section>
    <section id="section_blk_ccj_h1b">
      <p>Apps that use this feature:</p>
      <ul id="ul_qzp_ccj_h1b">
        <li>
          <xref href="c_chat_app.dita#c_chat_app">Chat</xref>
        </li>
        <li>
          <xref href="c_comments_app.dita#c_comments_app">Comments</xref>
        </li>
        <li>
          <xref href="c_reviews_app.dita#c_reviews_app">Reviews</xref>
        </li>
        <li>
          <xref href="c_sidenotes_app.dita#c_sidenotes_app">Sidenotes</xref>
        </li>
      </ul>
    </section>
  </conbody>
</concept>