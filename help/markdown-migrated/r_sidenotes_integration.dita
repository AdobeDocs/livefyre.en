<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="r_sidenotes_integration">
  <title>Sidenotes Integration</title>
  <shortdesc>Integrate a Sidenotes app by following a process similar to Core
    Applications.</shortdesc>
  <prolog>
    <metadata>
      <othermeta name="solution" content="Experience Manager"/>
    </metadata>
  </prolog>
  <refbody>
    <section id="section_qyc_cpv_sy">
      <p>As a general rule, if your Core Application integration is complete, the code written to
        generate the <codeph>collectionMeta</codeph> object may be reused for Sidenotes.</p>
      <p>You can also reuse your existing <codeph>auth</codeph> delegates by supplying an
          <codeph>auth</codeph> delegate created with <codeph>fyre.conv</codeph> to Sidenotes in the
        (optional) <codeph>authDelegate</codeph> field.</p>
      <note>Sidenotes allows you to include <codeph>network</codeph>, <codeph>siteId</codeph>, and
          <codeph>articleId</codeph> in a single object, rather than passing them separately in
        other parts of the constructor.</note>
      <codeblock>&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;!-- First add Livefyre.js to the page -->
&lt;script src="http://cdn.livefyre.com/Livefyre.js">&lt;/script>
&lt;/head>
&lt;body>
&lt;script type="text/javascript">
var convConfig = {
 network: 'client-solutions.fyre.co',
 selectors:'span.lyrics-sidenote',
 siteId: '356373',
 articleId: 'sidenotes-sample',
 collectionMeta: 'eyJhbGciOiAiSFMyNTYiLCAidHlwIjogIkpXVCJ9.eyJ1cmwiOiAiaHR0cDovL3d3dy5zaWRlbm90ZXMtZGVtby5jb20vbHlyaWNzIiwgInNpdGVJZCI6ICIzMDQwNTkiLCAidHlwZSI6ICJzaWRlbm90ZXMiLCAiYXJ0aWNsZUlkIjogInNpZGVub3Rlc19zYW1wbGUiLCAidGl0bGUiOiAiQ2xpZW50IFNvbHV0aW9ucyBTaWRlbm90ZXMifQ.2gxnsM0TS8dfp-Jokb5uW1kuMl-DqIlqfJSCBwJgf1k'
};
 
Livefyre.require(['sidenotes#1', 'auth'], function (Sidenotes, Auth) {
 new Sidenotes(convConfig);
 Auth.delegate({
 login: function (callback) {
 callback(null,{livefyre:'&lt;userauthtoken>'});
 }
 });
 });
&lt;/script>
&lt;/body>
&lt;/html></codeblock>
      <p>As noted in the Building <codeph>collectionMeta</codeph> section,
          <codeph>collectionMeta</codeph> is an encoded JSON object. In the example above, the JSON
        object takes the following format before itâ€™s JWT encoded.</p>
      <codeblock>
{
"title":"Client Solutions Sidenotes",
"url":"http:\/\/www.livefyre.com\/sidenotes",
"articleId":"sidenotes_sample",
"siteId":"304059",
"type":"sidenotes"
}</codeblock>
      <p>For more information, please see the <codeph>collectionMeta</codeph> token.</p>
      <p><b>Mobile Setup</b></p>
      <p>Sidenotes has been optimized for use in mobile devices. For best results with mobile
        versions of your Livefyre App, set the user-scalable option to no. For example:</p>
      <codeblock>&lt;meta name="viewport" content="width=device-width, user-scalable=no"></codeblock>
    </section>
  </refbody>
</reference>
